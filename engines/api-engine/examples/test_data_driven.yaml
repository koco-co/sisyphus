name: "用户创建API测试（数据驱动）"
description: "使用CSV数据测试用户创建API"

config:
  timeout: 30
  retry_times: 0
  data_iterations: true
  data_source:
    type: csv
    file_path: "examples/test_data.csv"
    delimiter: ","
    encoding: utf-8
    has_header: true
  variable_prefix: "user_"

steps:
  - 打印用户信息:
      type: request
      url: "https://httpbin.org/post"
      method: POST
      body:
        username: "{{user_username}}"
        email: "{{user_email}}"
        age: "{{user_age}}"
      validations:
        - type: status_code
          path: "$.status_code"
          expect: "200"
          description: "请求应该成功"

  - 验证用户数据:
      type: request
      url: "https://httpbin.org/anything"
      method: GET
      validations:
        - type: eq
          path: "$.url"
          expect: "https://httpbin.org/anything"
          description: "URL应该正确"
